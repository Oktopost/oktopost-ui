<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>OUI</title>

    <link href="dist/okto-ui.css" media="screen" rel="stylesheet" type="text/css">
</head>
<body>
    
   <a href="" class="modal">Modal Big</a>
   <a href="" class="dialog">Confirm</a>

   <a href="" class="menu">Toggle Menu</a>

   <div class="my-menu hidden">
        <a href="">My menu</a>
   </div>


   <div class="small-modal hidden">
        <div class="head">
            <h2>Small Modal</h2>
            <a href="" data-oui-modal-close>X</a>
        </div>
        <div class="body">
            <a href="">Popup menu</a>
            <p>Hello</p>
        </div>
   </div>
   <div class="big-modal hidden">
        <div class="head">
            <h2>Big Modal</h2>
            <a href="" data-oui-modal-close>X</a>
        </div>
        <div class="body">
            <a href="">Open small modal</a>
        </div>
   </div>

    <script src="vendor/jquery/dist/jquery.min.js"></script>
    <script src="vendor/handlebars/handlebars.runtime.min.js"></script>
    <script src="vendor/oktopost-namespace/web/namespace.js"></script>
    <script src="vendor/plankton/plankton-min.js"></script>
    <script src="vendor/oktopost-duct/duct.js"></script>

    <script src="vendor/oktopost-classy/web/namespace.js"></script>
    <script src="vendor/oktopost-classy/web/Classify.js"></script>
    <script src="vendor/oktopost-classy/web/Enum.js"></script>
    <script src="vendor/oktopost-classy/web/Singleton.js"></script>

    <script src="dist/okto-ui-templates.js"></script>
    <script src="dist/okto-ui.js"></script>
    
    <script>
        (function () {
            var Dialog = window.OUI.components.Dialog;
            var Modal = window.OUI.components.Modal;
            var Menu = window.OUI.components.Menu;

            var myMenu = new Menu($('a.menu'), $('div.my-menu').html(), 'my-menu');
            
            myMenu.onAfterOpen(function (container) {
                var subMenu = new Menu(
                    container.find('a'), 
                    $('div.my-menu').html(), 
                    'my-sub-menu');
            });

            $('a.dialog').on('click', function (e) {
                e.preventDefault();
                
                var dialog = new Dialog('YES', 'NO');
                
                dialog.onConfirm(function () {
                    console.log('YES');
                });

                dialog.open('Are you sure?');
            });

            $('a.modal').on('click', function (e) {
                e.preventDefault();

                var bigContents = $('div.big-modal').html();
                var bigModal = new Modal(bigContents, 'big');

                bigModal.onAfterOpen(function (container) {
                    container.find('div.body a').on('click', function (e) {
                        e.preventDefault();

                        var smallContents = $('div.small-modal').html();
                        var smallModal = new Modal(smallContents, 'small');
                        smallModal.onAfterOpen(function (smallModalContainer) {
                            new Menu(
                                smallModalContainer.find('a'), 
                                $('div.my-menu').html(), 
                                'my-menu');
                        });
                        smallModal.open();
                    });
                });

                bigModal.open();
            });
        })();        
    </script>

</body>
</html>